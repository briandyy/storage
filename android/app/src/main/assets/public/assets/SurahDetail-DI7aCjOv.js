import{S as f,g as Pe,a as se,Q as J,j as t}from"./index-Co3lyjy0.js";import{e as st,f as nt,h as lt,r as s,u as ot,L as it}from"./vendor-react-CaYZq_vZ.js";import{L as ct,E as dt}from"./ErrorState-DCEne8_7.js";import{g as ut,a as mt,c as S}from"./arabicUtils-WvAGflc5.js";import{u as xt}from"./vendor-i18n-BjjXjqrR.js";function ne(p){return p.toLowerCase().replace(/[-'`'"]/g,"").replace(/\s+/g,"").trim()}function De(p,o){const $=ne(p),v=ne(o);if(v.includes($))return!0;const k=["al","as","ar","an"];for(const N of k)if($.startsWith(N)&&v.startsWith(N)){const d=$.slice(N.length),L=v.slice(N.length);if(L.includes(d)||d.includes(L))return!0}return!1}function ht(p,o,$){if(!p.trim())return o;const v=ne(p);return o.filter(k=>!!(De(p,k.namaLatin)||De(p,k.arti)||v===String(k.nomor)))}const G=[.5,.75,1,1.25,1.5,2];function jt(){var Ie,_e,Le,Re,qe,ze;const{surahNumber:p}=st(),{t:o,i18n:$}=xt(),v=nt(),[k]=lt(),N=$.language==="en",[d,L]=s.useState(null),[M,le]=s.useState(null),[Q,oe]=s.useState([]),[U,ie]=s.useState([]),[K,ce]=s.useState(!0),[de,ue]=s.useState(""),[me,xe]=s.useState(null),[A,he]=s.useState(()=>localStorage.getItem("selectedQari")||"05"),[u,R]=s.useState(null),[fe,pe]=s.useState(1),[ge,Me]=s.useState(null),[b,w]=s.useState(!1),[Qe,B]=s.useState(!1),[Ue,F]=s.useState(!1),[n,y]=s.useState(()=>{const e=localStorage.getItem("playbackSettings");return e?JSON.parse(e):{startSurah:1,startAyat:1,endSurah:114,endAyat:6,repeatCount:1,currentRepeat:0,playbackSpeed:1}}),[O,be]=s.useState(0),[T,Be]=s.useState(0),[x,V]=s.useState(()=>{const e=localStorage.getItem("audioVolume");return e?parseFloat(e):1}),[C,Fe]=s.useState(()=>{const e=localStorage.getItem("enableTajweed");return e?e==="true":!0}),[ye,je]=s.useState({}),[Oe,ve]=s.useState(!1),[X,Y]=s.useState(null),[H,Ne]=s.useState(""),Ve=s.useMemo(()=>ht(H,f),[H]),m=s.useRef(null),E=s.useRef(null),He=s.useRef(new Map),W=s.useRef(!1),q=s.useRef(null),ke=s.useRef(b),Z=s.useRef(u),i=parseInt(p||"1");s.useEffect(()=>{localStorage.setItem("playbackSettings",JSON.stringify(n))},[n]),s.useEffect(()=>{p&&(we(parseInt(p)),B(!1),pe(1))},[p,N]),s.useEffect(()=>{localStorage.setItem("selectedQari",A)},[A]),s.useEffect(()=>{m.current&&(m.current.playbackRate=n.playbackSpeed)},[n.playbackSpeed]),s.useEffect(()=>{localStorage.setItem("enableTajweed",String(C))},[C]),s.useEffect(()=>{m.current&&(m.current.volume=x),localStorage.setItem("audioVolume",String(x))},[x]),s.useEffect(()=>{ke.current=b,Z.current=u},[b,u]),s.useEffect(()=>{const e=()=>{W.current=!0,q.current&&clearTimeout(q.current),q.current=setTimeout(()=>{if(W.current=!1,ke.current&&Z.current){const a=document.getElementById(`ayat-${Z.current}`);a&&a.scrollIntoView({behavior:"smooth",block:"center"})}},3e3)};return window.addEventListener("wheel",e,{passive:!0}),window.addEventListener("touchstart",e,{passive:!0}),window.addEventListener("touchmove",e,{passive:!0}),window.addEventListener("mousedown",e,{passive:!0}),()=>{window.removeEventListener("wheel",e),window.removeEventListener("touchstart",e),window.removeEventListener("touchmove",e),window.removeEventListener("mousedown",e),q.current&&clearTimeout(q.current)}},[]),s.useEffect(()=>{if(!b||!u||W.current)return;const e=setTimeout(()=>{if(W.current)return;const a=document.getElementById(`ayat-${u}`);a&&a.scrollIntoView({behavior:"smooth",block:"center"})},150);return()=>clearTimeout(e)},[u,b]);const ee=ot();s.useEffect(()=>{if(d&&ee.hash){const e=ee.hash.match(/^#ayat-(\d+)$/);if(e){const a=parseInt(e[1],10);pe(a),setTimeout(()=>{const r=document.getElementById(`ayat-${a}`);r&&(r.scrollIntoView({behavior:"smooth",block:"center"}),r.classList.add("ring-2","ring-primary"),setTimeout(()=>{r.classList.remove("ring-2","ring-primary")},2e3))},300)}}},[d,ee.hash]),s.useEffect(()=>{if(d&&!K){const e=k.get("autoplay"),a=k.get("bismillah")==="1";if(e){const r=parseInt(e,10);!isNaN(r)&&r>=1&&r<=d.jumlahAyat&&(window.history.replaceState({},"",`/quran/${i}`),setTimeout(()=>{g(i,r,a)},500))}}},[d,K]),s.useEffect(()=>{C&&d&&i&&We(i)},[C,d,i]);const We=async e=>{ve(!0);try{const a=`https://api.quran.com/api/v4/quran/verses/uthmani_tajweed?chapter_number=${e}`,r=await fetch(a);if(!r.ok)throw new Error("Failed to fetch tajweed");const l=await r.json(),c={};if(l.verses)for(const j of l.verses)c[j.verse_key]=j.text_uthmani_tajweed;je(c)}catch(a){console.error("Tajweed fetch error:",a),je({})}finally{ve(!1)}},we=async e=>{ce(!0),ue(""),L(null),le(null),oe([]),ie([]);try{const a=f.find(h=>h.nomor===e);if(!a)throw new Error(o("quran.failedToLoadSurah"));const r=Pe(e,a.namaLatin),l=`${se}/${r}/surat-index.json`,c=`${se}/${r}/tafsir.json`,[j,D]=await Promise.allSettled([fetch(l),fetch(c)]);if(j.status==="fulfilled"&&j.value.ok){const h=await j.value.json();L(h)}else throw new Error(o("quran.failedToLoadSurah"));if(D.status==="fulfilled"&&D.value.ok){const h=await D.value.json();oe(h.tafsir||[])}if(N)try{const[h,ae]=await Promise.allSettled([ut(e),mt(e)]);if(h.status==="fulfilled"&&h.value&&le(h.value),ae.status==="fulfilled"&&ae.value){const re=ae.value;if(re.tafsirs&&Array.isArray(re.tafsirs)){const tt=re.tafsirs.map((at,rt)=>({verse_key:`${e}:${rt+1}`,text:at.text}));ie(tt)}}}catch(h){console.warn("English data not available, using Indonesian:",h)}}catch(a){ue(a instanceof Error?a.message:o("common.error"))}finally{ce(!1)}},z=s.useCallback((e,a)=>{const r=f.find(h=>h.nomor===e);if(!r)return"";const l=Pe(r.nomor,r.namaLatin),c=J.find(h=>h.id===A);if(!c)return"";const j=String(e).padStart(3,"0"),D=String(a).padStart(3,"0");return`${se}/${l}/audio-ayat/${c.folder}/${j}-${D}-${c.folder}.mp3`},[A]),Se=s.useCallback(()=>z(1,1),[z]),Ae=s.useCallback((e,a,r)=>e===9||e===1||a!==1?!1:r,[]),I=s.useCallback((e,a)=>{const{startSurah:r,startAyat:l,endSurah:c,endAyat:j}=n;return!(e<r||e>c||e===r&&a<l||e===c&&a>j)},[n]),_=s.useCallback((e,a)=>{const r=f.find(l=>l.nomor===e);if(!r)return null;if(a<r.jumlahAyat){const l=a+1;if(I(e,l))return{surah:e,ayat:l}}if(e<n.endSurah){const l=e+1;if(I(l,1))return{surah:l,ayat:1}}return null},[n,I]),Ce=s.useCallback((e,a)=>{if(a>1){const r=a-1;if(I(e,r))return{surah:e,ayat:r}}if(e>n.startSurah){const r=e-1,l=f.find(c=>c.nomor===r);if(l&&I(r,l.jumlahAyat))return{surah:r,ayat:l.jumlahAyat}}return null},[n,I]),P=s.useCallback((e,a)=>{const r=z(e,a);if(m.current&&r){E.current&&E.current.src,m.current.src=r,m.current.playbackRate=n.playbackSpeed,m.current.play().catch(c=>console.error("Error playing audio:",c)),R(a),w(!0);const l=_(e,a);if(l&&l.surah===e){const c=z(l.surah,l.ayat);c&&(E.current||(E.current=new Audio),E.current.src=c,E.current.preload="auto",E.current.load())}}},[z,n.playbackSpeed,i,_]),g=s.useCallback((e,a,r=!1)=>{if(r&&Ae(e,a,!0)){Y({surah:e,ayat:a});const l=Se();m.current&&l&&(m.current.src=l,m.current.playbackRate=n.playbackSpeed,m.current.play().catch(c=>console.error("Error playing bismillah:",c)),R(a),w(!0))}else Y(null),P(e,a)},[Ae,Se,P,n.playbackSpeed,i]),Je=s.useCallback(()=>{if(X){const{surah:a,ayat:r}=X;Y(null),P(a,r);return}if(!d||u===null)return;const e=_(i,u);if(e)if(e.surah!==i){R(null),w(!1);const a=e.ayat===1&&e.surah!==9;v(`/quran/${e.surah}?autoplay=${e.ayat}${a?"&bismillah=1":""}`)}else P(e.surah,e.ayat);else n.currentRepeat<n.repeatCount-1?(y(a=>({...a,currentRepeat:a.currentRepeat+1})),n.startSurah!==i?v(`/quran/${n.startSurah}?autoplay=${n.startAyat}`):g(n.startSurah,n.startAyat,!0)):(y(a=>({...a,currentRepeat:0})),R(null),w(!1))},[d,u,i,_,g,P,n,v,X]),Ge=s.useCallback(()=>{m.current&&(be(m.current.currentTime),Be(m.current.duration||0))},[]),Ke=s.useCallback(()=>{xe(o("quran.audioError")),w(!1),setTimeout(()=>xe(null),3e3)},[o]),Xe=s.useCallback(e=>{const a=parseFloat(e.target.value);m.current&&(m.current.currentTime=a,be(a))},[]),Ee=s.useCallback(()=>{m.current&&(b?(m.current.pause(),w(!1)):(u?m.current.play():g(i,fe),w(!0)))},[b,u,g,i,fe]),te=s.useCallback(()=>{m.current&&(m.current.pause(),m.current.currentTime=0),y(e=>({...e,currentRepeat:0})),R(null),w(!1)},[]),Ye=s.useCallback(()=>{if(!u&&d){g(i,1);return}if(!u)return;const e=_(i,u);e&&e.surah===i&&g(e.surah,e.ayat)},[u,i,_,g,d]),Ze=s.useCallback(()=>{if(!u)return;const e=Ce(i,u);e&&e.surah===i&&g(e.surah,e.ayat)},[u,i,Ce,g]),$e=e=>{if(N&&U.length>0){const r=U.find(l=>l.verse_key===`${i}:${e}`);if(r)return S(r.text);if(U[e-1])return S(U[e-1].text)}if(!Q.length)return"";const a=Q.find(r=>r.ayat===e);return a?S(a.teks):Q[e-1]?S(Q[e-1].teks):""},et=(e,a)=>{var r;if(N&&((r=M==null?void 0:M.data)!=null&&r.ayahs)){const l=M.data.ayahs.find(c=>c.numberInSurah===e);if(l!=null&&l.textEnglish)return S(l.textEnglish)}return S(a)},Te=e=>{if(isNaN(e))return"0:00";const a=Math.floor(e/60),r=Math.floor(e%60);return`${a}:${r.toString().padStart(2,"0")}`};return t.jsxs("div",{className:"flex flex-1 overflow-hidden relative no-select",onContextMenu:e=>e.preventDefault(),children:[t.jsx("audio",{ref:m,onEnded:Je,onTimeUpdate:Ge,onError:Ke}),me&&t.jsxs("div",{className:"fixed top-4 right-4 z-50 bg-red-600 text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2",children:[t.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"error"}),me]}),t.jsxs("aside",{className:`w-80 flex-none flex-col border-r border-border-dark bg-bg-dark ${Qe?"flex fixed inset-0 z-50":"hidden lg:flex"}`,children:[t.jsxs("div",{className:"p-4 border-b border-border-dark flex items-center justify-between",children:[t.jsx("h2",{className:"font-bold text-lg",children:o("quran.surahList")}),t.jsx("button",{onClick:()=>B(!1),className:"lg:hidden p-2 rounded-lg hover:bg-border-dark",children:t.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),t.jsx("div",{className:"p-3 border-b border-border-dark",children:t.jsxs("div",{className:"relative",children:[t.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary text-[20px]",children:"search"}),t.jsx("input",{type:"text",value:H,onChange:e=>Ne(e.target.value),placeholder:o("quran.searchSurah"),className:"w-full bg-surface-dark border border-border-dark rounded-lg pl-10 pr-8 py-2 text-sm placeholder-text-secondary focus:border-primary focus:outline-none"}),H&&t.jsx("button",{onClick:()=>Ne(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-text-secondary hover:text-white",children:t.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"close"})})]})}),t.jsx("div",{className:"flex-1 overflow-y-auto p-3 space-y-1",children:Ve.map(e=>t.jsxs(it,{to:`/quran/${e.nomor}`,onClick:()=>B(!1),className:`group flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-colors border ${e.nomor===i?"bg-primary/10 border-primary/20":"border-transparent hover:bg-surface-dark"}`,children:[t.jsx("div",{className:`flex items-center justify-center size-8 rounded-lg font-bold text-sm ${e.nomor===i?"bg-primary text-black":"bg-border-dark text-text-secondary group-hover:text-primary"}`,children:e.nomor}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("p",{className:`text-sm font-semibold truncate ${e.nomor===i?"text-white":"text-gray-300 group-hover:text-primary"}`,children:e.namaLatin}),t.jsx("p",{className:`font-arabic text-lg leading-none ${e.nomor===i?"text-primary":"text-gray-500 group-hover:text-white"}`,children:e.nama})]}),t.jsxs("p",{className:"text-xs text-text-secondary truncate",children:[e.arti," • ",e.jumlahAyat," ",o("quran.verses")]})]})]},e.nomor))})]}),t.jsxs("main",{className:"flex-1 flex flex-col h-full overflow-hidden bg-bg-dark relative",children:[t.jsx("button",{onClick:()=>B(!0),className:"lg:hidden fixed bottom-44 left-4 z-30 size-12 rounded-full bg-surface-dark border border-border-dark text-primary flex items-center justify-center shadow-lg hover:bg-surface-dark-2 transition-colors",children:t.jsx("span",{className:"material-symbols-outlined",children:"menu_book"})}),K?t.jsx(ct,{message:o("quran.loadingSurah")}):de?t.jsx(dt,{message:de,onRetry:()=>we(i)}):d&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex-none p-6 md:p-10 pb-0",children:t.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-primary/10 border border-primary/20 p-8 text-center",children:[t.jsx("div",{className:"absolute top-0 right-0 -mt-10 -mr-10 w-64 h-64 bg-primary/20 rounded-full blur-3xl"}),t.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-primary font-medium text-sm tracking-widest uppercase",children:[t.jsx("span",{children:d.tempatTurun}),t.jsx("span",{className:"size-1 rounded-full bg-current"}),t.jsxs("span",{children:[d.jumlahAyat," ",o("quran.verses")]})]}),t.jsxs("h1",{className:"text-4xl md:text-5xl font-bold",children:["Surah ",d.namaLatin]}),t.jsx("p",{className:"text-lg text-gray-300",children:d.arti}),t.jsx("div",{className:"w-full h-px bg-current opacity-20 max-w-[200px] my-2"}),t.jsx("p",{className:"font-arabic text-3xl text-white",children:d.nama}),t.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 mt-4",children:[t.jsx("select",{value:A,onChange:e=>{he(e.target.value),te()},className:"px-4 py-2 rounded-lg bg-border-dark border border-border-dark text-white text-sm focus:outline-none focus:border-primary",children:J.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))}),t.jsxs("button",{onClick:()=>g(i,1,!0),className:"flex items-center gap-2 px-6 py-2.5 rounded-full bg-primary text-black font-semibold hover:scale-105 transition-transform shadow-lg",children:[t.jsx("span",{className:"material-symbols-outlined filled",children:"play_arrow"}),t.jsx("span",{children:o("quran.playSurah")})]})]}),t.jsxs("div",{className:"flex flex-col items-center gap-3 mt-4",children:[t.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"checkbox",className:"sr-only peer",checked:C,onChange:e=>Fe(e.target.checked)}),t.jsx("div",{className:"w-10 h-5 bg-gray-400 dark:bg-gray-600 rounded-full peer peer-checked:bg-primary transition-colors"}),t.jsx("div",{className:"absolute left-0.5 top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform peer-checked:translate-x-5"})]}),t.jsxs("span",{className:"text-sm font-medium flex items-center gap-1",children:[t.jsx("span",{className:"material-symbols-outlined text-[18px] text-primary",children:"palette"}),o("quran.tajweedColors"),Oe&&t.jsxs("span",{className:"text-xs text-text-secondary",children:["(",o("common.loading"),"...)"]})]})]}),C&&t.jsxs("div",{className:"tajweed-legend text-xs",children:[t.jsxs("div",{className:"tajweed-legend-item",children:[t.jsx("span",{className:"tajweed-legend-dot",style:{background:"#ff7e00"}}),t.jsx("span",{children:"Ghunnah"})]}),t.jsxs("div",{className:"tajweed-legend-item",children:[t.jsx("span",{className:"tajweed-legend-dot",style:{background:"#3498db"}}),t.jsx("span",{children:"Ikhfa"})]}),t.jsxs("div",{className:"tajweed-legend-item",children:[t.jsx("span",{className:"tajweed-legend-dot",style:{background:"#27ae60"}}),t.jsx("span",{children:"Idgham"})]}),t.jsxs("div",{className:"tajweed-legend-item",children:[t.jsx("span",{className:"tajweed-legend-dot",style:{background:"#9b59b6"}}),t.jsx("span",{children:"Iqlab"})]}),t.jsxs("div",{className:"tajweed-legend-item",children:[t.jsx("span",{className:"tajweed-legend-dot",style:{background:"#e74c3c"}}),t.jsx("span",{children:"Qalqalah"})]}),t.jsxs("div",{className:"tajweed-legend-item",children:[t.jsx("span",{className:"tajweed-legend-dot",style:{background:"#e91e63"}}),t.jsx("span",{children:"Madd"})]}),t.jsxs("div",{className:"tajweed-legend-item",children:[t.jsx("span",{className:"tajweed-legend-dot",style:{background:"#009688"}}),t.jsx("span",{children:"Lam Syamsiyah"})]})]})]})]})]})}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-10 space-y-6 scroll-smooth pb-48",children:[d.nomor!==9&&t.jsxs("div",{className:"text-center py-8 mb-6",children:[t.jsx("div",{className:"mb-3",children:t.jsx("p",{className:"font-arabic text-3xl md:text-4xl text-white",style:{lineHeight:"2.5"},children:"بِسْمِ ٱللَّهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ"})}),t.jsx("p",{className:"text-text-secondary text-sm mb-6",children:o("quran.bismillah")}),t.jsxs("div",{className:"flex items-center justify-center gap-3",children:[t.jsx("div",{className:"h-px w-12 bg-primary/30"}),t.jsx("span",{className:"text-primary text-lg",children:"✦"}),t.jsx("div",{className:"h-px w-12 bg-primary/30"})]})]}),d.ayat.map(e=>{const a=u===e.nomorAyat;return t.jsxs("article",{id:`ayat-${e.nomorAyat}`,ref:r=>{r&&He.current.set(e.nomorAyat,r)},className:`group relative flex flex-col xl:flex-row gap-6 p-6 rounded-2xl transition-all border-2 ${a?"bg-emerald-100 dark:bg-emerald-900/40 border-emerald-400 dark:border-emerald-700 shadow-lg":"border-transparent hover:bg-surface-dark hover:border-border-dark"}`,children:[a&&t.jsxs("div",{className:"absolute top-3 right-3 md:top-3 md:right-3 flex items-center gap-2 px-3 py-1 bg-emerald-500 rounded-full z-10",children:[t.jsxs("div",{className:"flex gap-0.5",children:[t.jsx("div",{className:"w-1 h-3 bg-white rounded-full animate-pulse"}),t.jsx("div",{className:"w-1 h-4 bg-white rounded-full animate-pulse",style:{animationDelay:"0.1s"}}),t.jsx("div",{className:"w-1 h-2 bg-white rounded-full animate-pulse",style:{animationDelay:"0.2s"}})]}),t.jsx("span",{className:"text-white text-xs font-bold hidden md:inline",children:o("quran.playing")})]}),t.jsxs("div",{className:"flex xl:flex-col items-center xl:items-start justify-between gap-4 min-w-[80px]",children:[t.jsx("div",{className:`flex items-center justify-center size-10 rounded-full font-bold text-lg border-2 ${a?"bg-emerald-500 text-white border-emerald-500":"bg-border-dark text-text-secondary border-transparent group-hover:text-primary"}`,children:e.nomorAyat}),t.jsxs("div",{className:"flex items-center gap-1 xl:flex-col xl:gap-2",children:[t.jsx("button",{onClick:()=>a&&b?Ee():g(i,e.nomorAyat),className:`size-9 flex items-center justify-center rounded-lg transition-colors ${a?"bg-emerald-500 text-white":"hover:bg-border-dark text-text-secondary hover:text-primary"}`,children:t.jsx("span",{className:"material-symbols-outlined text-[22px]",children:a&&b?"pause":"play_arrow"})}),t.jsx("button",{onClick:()=>Me(ge===e.nomorAyat?null:e.nomorAyat),className:"size-9 flex items-center justify-center rounded-lg hover:bg-border-dark text-text-secondary hover:text-primary transition-colors",children:t.jsx("span",{className:"material-symbols-outlined text-[22px]",children:"menu_book"})})]})]}),t.jsxs("div",{className:"flex flex-col-reverse md:flex-row gap-6 md:gap-12 flex-1",children:[t.jsxs("div",{className:"flex-1 flex flex-col justify-center gap-2",children:[t.jsx("p",{className:`italic text-base md:text-lg leading-relaxed font-light ${a?"text-emerald-700 dark:text-emerald-300":"text-emerald-600 dark:text-emerald-400"}`,children:S(e.teksLatin)}),t.jsx("p",{className:`text-base leading-relaxed ${a?"text-gray-800 dark:text-white":"text-gray-600 dark:text-gray-300"}`,children:et(e.nomorAyat,e.teksIndonesia)}),ge===e.nomorAyat&&t.jsxs("div",{className:"mt-4 p-4 bg-surface-dark rounded-xl border border-border-dark",children:[t.jsxs("h4",{className:"font-semibold text-primary mb-2 flex items-center gap-2",children:[t.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"menu_book"}),o("quran.tafsirVerse",{number:e.nomorAyat})]}),$e(e.nomorAyat)?t.jsx("div",{className:"text-gray-400 text-sm prose prose-sm prose-invert max-w-none [&_p]:mb-2 [&_h2]:text-base [&_h2]:font-semibold [&_h2]:text-gray-300",dangerouslySetInnerHTML:{__html:$e(e.nomorAyat)}}):t.jsx("p",{className:"text-gray-400 text-sm",children:o("quran.tafsirNotAvailable")})]})]}),t.jsx("div",{className:"flex-1 flex items-center justify-end",children:C&&ye[`${i}:${e.nomorAyat}`]?t.jsx("p",{className:`font-arabic text-3xl md:text-4xl text-right ${a?"text-gray-800 dark:text-white":"text-gray-700 dark:text-white"}`,dir:"rtl",style:{lineHeight:"2.5"},dangerouslySetInnerHTML:{__html:ye[`${i}:${e.nomorAyat}`]}}):t.jsx("p",{className:`font-arabic text-3xl md:text-4xl text-right ${a?"text-gray-800 dark:text-white":"text-gray-700 dark:text-white"}`,dir:"rtl",style:{lineHeight:"2.5"},children:S(e.teksArab)})})]})]},e.nomorAyat)}),d.ayat.length>0&&t.jsx("div",{className:"divider-gradient"})]}),t.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 px-4 pb-4 lg:pl-80",children:t.jsxs("div",{className:"max-w-4xl mx-auto glass-panel rounded-2xl p-4 shadow-2xl",children:[t.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("span",{className:"text-xs text-text-secondary w-10 text-right font-mono",children:Te(O)}),t.jsxs("div",{className:"flex-1 relative h-6 flex items-center group cursor-pointer",children:[t.jsx("div",{className:"absolute inset-x-0 h-1.5 rounded-full",style:{background:"var(--audio-track-bg, rgba(255,255,255,0.2))"}}),t.jsx("div",{className:"absolute left-0 h-1.5 bg-primary rounded-full pointer-events-none",style:{width:`${T?O/T*100:0}%`}}),t.jsx("div",{className:"absolute h-3.5 w-3.5 bg-primary rounded-full border-2 border-white shadow-md transform -translate-x-1/2 pointer-events-none transition-transform group-hover:scale-125",style:{left:`${T?O/T*100:0}%`}}),t.jsx("input",{type:"range",min:"0",max:T||100,value:O,onChange:Xe,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer m-0 p-0","aria-label":"Seek slider"})]}),t.jsx("span",{className:"text-xs text-text-secondary w-10 font-mono",children:Te(T)})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[t.jsx("div",{className:"size-12 rounded-xl flex items-center justify-center flex-shrink-0",style:{background:"var(--audio-icon-bg, rgba(26, 92, 46, 1))"},children:t.jsx("span",{className:"material-symbols-outlined text-primary",children:"music_note"})}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("p",{className:"text-text-primary text-sm font-medium truncate",children:[d.namaLatin," ",u?`• Ayat ${u}`:""]}),t.jsxs("p",{className:"text-text-secondary text-xs truncate",children:[(Ie=J.find(e=>e.id===A))==null?void 0:Ie.name,n.repeatCount>1&&` • ${n.currentRepeat+1}/${n.repeatCount}x`]})]})]}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("button",{onClick:()=>{const a=(G.indexOf(n.playbackSpeed)+1)%G.length;y(r=>({...r,playbackSpeed:G[a]}))},className:"hidden sm:flex px-2 py-1 rounded-lg text-xs font-bold text-primary hover:opacity-80 transition-colors",style:{background:"var(--audio-icon-bg, rgba(26, 92, 46, 1))"},children:[n.playbackSpeed,"x"]}),t.jsx("button",{onClick:Ze,disabled:!u||u<=1,className:"size-10 flex items-center justify-center rounded-full text-text-primary hover:bg-black/5 dark:hover:bg-white/10 disabled:opacity-30 transition-colors",children:t.jsx("span",{className:"material-symbols-outlined text-[28px]",children:"skip_previous"})}),t.jsx("button",{onClick:Ee,className:"size-14 flex items-center justify-center rounded-full bg-primary hover:bg-primary-dark text-black transition-all shadow-lg hover:scale-105",children:t.jsx("span",{className:"material-symbols-outlined filled text-[32px]",children:b?"pause":"play_arrow"})}),t.jsx("button",{onClick:Ye,disabled:u!==null&&u>=d.jumlahAyat,className:"size-10 flex items-center justify-center rounded-full text-text-primary hover:bg-black/5 dark:hover:bg-white/10 disabled:opacity-30 transition-colors",children:t.jsx("span",{className:"material-symbols-outlined text-[28px]",children:"skip_next"})}),t.jsx("button",{onClick:te,className:"size-10 flex items-center justify-center rounded-full text-text-primary hover:bg-red-500/20 hover:text-red-400 transition-colors",children:t.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"stop"})}),t.jsx("button",{onClick:()=>F(!0),className:"size-10 flex items-center justify-center rounded-full text-text-primary hover:bg-black/5 dark:hover:bg-white/10 transition-colors",children:t.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"tune"})}),t.jsxs("div",{className:"hidden md:flex items-center gap-2 ml-2",children:[t.jsx("button",{onClick:()=>V(x===0?1:0),className:"text-text-secondary hover:text-text-primary transition-colors",children:t.jsx("span",{className:"material-symbols-outlined text-[20px]",children:x===0?"volume_off":x<.5?"volume_down":"volume_up"})}),t.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:x,onChange:e=>V(parseFloat(e.target.value)),className:"w-24 volume-slider",style:{background:`linear-gradient(to right, var(--primary) 0%, var(--primary) ${x*100}%, rgba(255,255,255,0.2) ${x*100}%, rgba(255,255,255,0.2) 100%)`},title:`${o("quran.volume")}: ${Math.round(x*100)}%`})]})]})]})]})}),Ue&&t.jsx("div",{className:"modal-overlay",onClick:()=>F(!1),children:t.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"sticky top-0 bg-surface-dark border-b border-border-dark px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[t.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[t.jsx("span",{className:"material-symbols-outlined text-primary",children:"tune"}),o("quran.audioSettings")]}),t.jsx("button",{onClick:()=>F(!1),className:"size-8 flex items-center justify-center rounded-lg hover:bg-border-dark text-text-secondary hover:text-white",children:t.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),t.jsxs("div",{className:"p-6 space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-text-secondary block mb-2",children:"Qari"}),t.jsx("select",{value:A,onChange:e=>{he(e.target.value),te()},className:"w-full px-4 py-3 rounded-lg bg-border-dark text-white text-base focus:outline-none",children:J.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-text-secondary block mb-2",children:o("quran.startFrom")}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("select",{value:n.startSurah,onChange:e=>{const a=parseInt(e.target.value);y(r=>{if(a>r.endSurah){const l=f.find(c=>c.nomor===a);return{...r,startSurah:a,startAyat:1,endSurah:a,endAyat:(l==null?void 0:l.jumlahAyat)||1}}return{...r,startSurah:a,startAyat:1}})},className:"px-3 py-3 rounded-lg bg-border-dark text-white text-sm focus:outline-none",children:f.map(e=>t.jsxs("option",{value:e.nomor,children:[e.nomor,". ",e.namaLatin]},e.nomor))}),t.jsx("select",{value:n.startAyat,onChange:e=>{const a=parseInt(e.target.value);y(r=>r.startSurah===r.endSurah&&a>r.endAyat?{...r,startAyat:a,endAyat:a}:{...r,startAyat:a})},className:"px-3 py-3 rounded-lg bg-border-dark text-white text-sm focus:outline-none",children:Array.from({length:((_e=f.find(e=>e.nomor===n.startSurah))==null?void 0:_e.jumlahAyat)||1},(e,a)=>t.jsxs("option",{value:a+1,children:["Ayat ",a+1]},a+1))})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-text-secondary block mb-2",children:o("quran.endAt")}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx("select",{value:n.endSurah,onChange:e=>{const a=parseInt(e.target.value),r=f.find(l=>l.nomor===a);y(l=>{let c=(r==null?void 0:r.jumlahAyat)||1;return a===l.startSurah&&c<l.startAyat&&(c=l.startAyat),{...l,endSurah:a,endAyat:c}})},className:"px-3 py-3 rounded-lg bg-border-dark text-white text-sm focus:outline-none",children:f.filter(e=>e.nomor>=n.startSurah).map(e=>t.jsxs("option",{value:e.nomor,children:[e.nomor,". ",e.namaLatin]},e.nomor))}),t.jsx("select",{value:n.endAyat,onChange:e=>y(a=>({...a,endAyat:parseInt(e.target.value)})),className:"px-3 py-3 rounded-lg bg-border-dark text-white text-sm focus:outline-none",children:Array.from({length:n.startSurah===n.endSurah?(((Le=f.find(e=>e.nomor===n.endSurah))==null?void 0:Le.jumlahAyat)||1)-n.startAyat+1:((Re=f.find(e=>e.nomor===n.endSurah))==null?void 0:Re.jumlahAyat)||1},(e,a)=>{const r=n.startSurah===n.endSurah?n.startAyat+a:a+1;return t.jsxs("option",{value:r,children:["Ayat ",r]},r)})})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-text-secondary block mb-2",children:o("quran.repeat")}),t.jsx("select",{value:n.repeatCount,onChange:e=>y(a=>({...a,repeatCount:parseInt(e.target.value),currentRepeat:0})),className:"w-full px-3 py-3 rounded-lg bg-border-dark text-white text-sm focus:outline-none",children:Array.from({length:25},(e,a)=>t.jsxs("option",{value:a+1,children:[a+1,"x"]},a+1))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm text-text-secondary block mb-2",children:o("quran.speed")}),t.jsx("div",{className:"grid grid-cols-6 gap-2",children:G.map(e=>t.jsxs("button",{onClick:()=>y(a=>({...a,playbackSpeed:e})),className:`py-3 rounded-lg text-sm font-medium transition-colors ${n.playbackSpeed===e?"bg-primary text-black":"bg-border-dark text-text-secondary hover:text-white"}`,children:[e,"x"]},e))})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"text-sm text-text-secondary block mb-2",children:[o("quran.volume"),": ",Math.round(x*100),"%"]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("button",{onClick:()=>V(x===0?1:0),className:"text-text-secondary hover:text-white transition-colors",children:t.jsx("span",{className:"material-symbols-outlined",children:x===0?"volume_off":x<.5?"volume_down":"volume_up"})}),t.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:x,onChange:e=>V(parseFloat(e.target.value)),className:"flex-1 volume-slider",style:{background:`linear-gradient(to right, var(--primary) 0%, var(--primary) ${x*100}%, rgba(255,255,255,0.2) ${x*100}%, rgba(255,255,255,0.2) 100%)`}})]})]}),t.jsxs("div",{className:"p-4 bg-[#1a5c2e]/30 rounded-xl border border-[#1a5c2e]",children:[t.jsxs("p",{className:"text-sm text-primary",children:[t.jsx("span",{className:"material-symbols-outlined text-[16px] align-middle mr-1",children:"play_circle"}),(qe=f.find(e=>e.nomor===n.startSurah))==null?void 0:qe.namaLatin," ",o("quran.verse")," ",n.startAyat," → ",(ze=f.find(e=>e.nomor===n.endSurah))==null?void 0:ze.namaLatin," ",o("quran.verse")," ",n.endAyat]}),t.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:[o("quran.repeat")," ",n.repeatCount,"x • ",o("quran.speed")," ",n.playbackSpeed,"x"]})]})]}),t.jsx("div",{className:"sticky bottom-0 bg-surface-dark border-t border-border-dark px-6 py-4 rounded-b-2xl",children:t.jsx("button",{onClick:()=>F(!1),className:"w-full btn-primary py-3 text-center",children:o("common.close")})})]})})]})]})]})}export{jt as default};
