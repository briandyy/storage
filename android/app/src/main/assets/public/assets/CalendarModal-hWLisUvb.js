import{j as t}from"./index-Co3lyjy0.js";import{r as p}from"./vendor-react-CaYZq_vZ.js";import{u as q}from"./vendor-i18n-BjjXjqrR.js";const V=["sun","mon","tue","wed","thu","fri","sat"],f=["january","february","march","april","may","june","july","august","september","october","november","december"];function P({isOpen:g,onClose:d,selectedDate:o,onSelectDate:x,mode:u="day"}){const{t:m}=q(),[j,l]=p.useState(new Date(o)),[n,b]=p.useState(u==="month"?"months":"days"),i=new Date,w=e=>m(`calendar.monthsFull.${f[e]}`),k=e=>m(`calendar.monthsFull.${f[e]}`).slice(0,3);if(p.useEffect(()=>{g&&(l(new Date(o)),b(u==="month"?"months":"days"))},[g,o,u]),!g)return null;const a=j.getFullYear(),s=j.getMonth(),v=new Date(a,s+1,0).getDate(),N=new Date(a,s,1).getDay(),M=()=>{l(new Date(a,s-1,1))},D=()=>{l(new Date(a,s+1,1))},Y=()=>{l(new Date(a-1,s,1))},C=()=>{l(new Date(a+1,s,1))},$=e=>{const r=new Date(a,s,e);x(r),d()},F=e=>{if(u==="month"){const r=new Date(a,e,1);x(r),d()}else l(new Date(a,e,1)),b("days")},_=e=>{l(new Date(e,s,1)),b("months")},S=e=>e===i.getDate()&&s===i.getMonth()&&a===i.getFullYear(),E=e=>e===o.getDate()&&s===o.getMonth()&&a===o.getFullYear(),h=Math.floor(a/10)*10,A=Array.from({length:12},(e,r)=>h-1+r);return t.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",onClick:d,children:t.jsxs("div",{className:"bg-surface-dark border border-border-dark rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border-dark bg-surface-dark-2",children:[t.jsx("button",{onClick:n==="days"?M:n==="months"?Y:()=>l(new Date(h-10,0,1)),className:"p-2 rounded-lg hover:bg-border-dark transition-colors",children:t.jsx("span",{className:"material-symbols-outlined",children:"chevron_left"})}),t.jsxs("button",{onClick:()=>b(n==="days"?"months":"years"),className:"text-lg font-bold hover:text-primary transition-colors",children:[n==="days"&&`${w(s)} ${a}`,n==="months"&&`${a}`,n==="years"&&`${h} - ${h+9}`]}),t.jsx("button",{onClick:n==="days"?D:n==="months"?C:()=>l(new Date(h+10,0,1)),className:"p-2 rounded-lg hover:bg-border-dark transition-colors",children:t.jsx("span",{className:"material-symbols-outlined",children:"chevron_right"})})]}),t.jsxs("div",{className:"p-4",children:[n==="days"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:V.map(e=>t.jsx("div",{className:"text-center text-xs font-medium text-text-secondary py-2",children:m(`calendar.days.${e}`)},e))}),t.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:N},(e,r)=>t.jsx("div",{className:"aspect-square"},`empty-${r}`)),Array.from({length:v},(e,r)=>{const c=r+1,y=E(c),T=S(c);return t.jsx("button",{onClick:()=>$(c),className:`aspect-square flex items-center justify-center rounded-lg text-sm font-medium transition-all
                                                ${y?"bg-primary text-black":T?"bg-primary/20 text-primary border border-primary":"hover:bg-border-dark"}`,children:c},c)})]})]}),n==="months"&&t.jsx("div",{className:"grid grid-cols-3 gap-2",children:f.map((e,r)=>{const c=r===i.getMonth()&&a===i.getFullYear(),y=r===o.getMonth()&&a===o.getFullYear();return t.jsx("button",{onClick:()=>F(r),className:`py-3 px-2 rounded-lg text-sm font-medium transition-all
                                            ${y?"bg-primary text-black":c?"bg-primary/20 text-primary border border-primary":"hover:bg-border-dark"}`,children:k(r)},e)})}),n==="years"&&t.jsx("div",{className:"grid grid-cols-3 gap-2",children:A.map(e=>{const r=e===i.getFullYear(),c=e===o.getFullYear();return t.jsx("button",{onClick:()=>_(e),className:`py-3 px-2 rounded-lg text-sm font-medium transition-all
                                            ${c?"bg-primary text-black":r?"bg-primary/20 text-primary border border-primary":"hover:bg-border-dark"}`,children:e},e)})})]}),t.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-border-dark",children:[t.jsx("button",{onClick:()=>{x(new Date),d()},className:"px-4 py-2 text-sm text-primary hover:underline",children:m("common.today")}),t.jsx("button",{onClick:d,className:"px-4 py-2 text-sm bg-border-dark rounded-lg hover:bg-white/10 transition-colors",children:m("common.close")})]})]})})}export{P as C};
